<section id="filter-products">

  <!-- فلاتر يدوية -->
  <div id="custom-filters">
    <h3>اختر المقاس:</h3>
    <label><input type="checkbox" name="size" value="s"> S</label>
    <label><input type="checkbox" name="size" value="m"> M</label>
    <label><input type="checkbox" name="size" value="l"> L</label>

    <h3>اختر الماركة:</h3>
    <label><input type="checkbox" name="brand" value="zara"> Zara</label>
    <label><input type="checkbox" name="brand" value="hm"> H&M</label>

    <br>
    <button id="apply-filters">تطبيق الفلاتر</button>
  </div>

  <!-- قائمة المنتجات -->
  <salla-products-list
    id="productList"
    source="categories"
    source-value="1360317432"
    limit="20"
    pagination="true">
  </salla-products-list>

</section>
<script>
  document.getElementById("apply-filters").addEventListener("click", function () {
    const selectedSizes = Array.from(document.querySelectorAll("input[name='size']:checked")).map(el => el.value);
    const selectedBrands = Array.from(document.querySelectorAll("input[name='brand']:checked")).map(el => el.value);

    // نجهز الفلاتر بصيغة JSON وندخّلها في السورس
    const filters = [];

    if (selectedSizes.length > 0) {
      filters.push({ key: "size", type: "variants", value: selectedSizes });
    }

    if (selectedBrands.length > 0) {
      filters.push({ key: "brand", type: "variants", value: selectedBrands });
    }

    const productList = document.getElementById("productList");

    // نحط الفلاتر في الأتربيوت
    productList.setAttribute("filters", JSON.stringify(filters));
  });
</script>
{# ك #}
